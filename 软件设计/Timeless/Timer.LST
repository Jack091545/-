C51 COMPILER V9.00   TIMER                                                                 05/02/2016 14:37:39 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN Timer.OBJ
COMPILER INVOKED BY: C:\D\software\KEILC51\C51\BIN\C51.EXE Timer.c LARGE BROWSE DEFINE(__WEI__) DEBUG OBJECTEXTEND

line level    source

   1          #include "stc12c5a60s2.h"
   2          #include "DS1302.h"
   3          
   4          
   5          
   6          sbit LED = P1^4;  /* 用来指示MCU还活着 */
   7          
   8          static unsigned char Timer_Counter0 = 0; 
   9          static unsigned char Timer_Counter1 = 0; 
  10          static unsigned char Display_Switch = 1; 
  11          
  12          
  13          /*------------------------------------------------
  14                  获取显示时间标志位
  15          ------------------------------------------------*/
  16          unsigned char *Get_Display_Switch(void)
  17          {
  18   1              return Display_Switch;
  19   1      }
  20          
  21          
  22          
  23          void Timer_Init(void)
  24          {                                                                                                               
  25   1              TMOD |= 0x01; //16位定时器
  26   1      
  27   1          TH0 = (65536-50000)/256;
  28   1          TL0 = (65536-50000)%256;
  29   1      
  30   1          ET0 = 1; //允许T0中断
  31   1          TR0 = 1;
  32   1      
  33   1              LED = 1;
  34   1      }
  35          
  36          void Timer0_SER(void) interrupt 1
  37          {
  38   1              unsigned char i = 0;
  39   1          TH0=(65536-50000)/256;
  40   1          TL0=(65536-50000)%256;
  41   1              Timer_Counter0++;
  42   1              Timer_Counter1++;
  43   1              if(Timer_Counter0 == 20)//1s
  44   1              {
  45   2                      Timer_Counter0 = 0;
  46   2                      LED = !LED;             
  47   2              } 
  48   1              if(Timer_Counter1 == 200)//10s
  49   1              {
  50   2                      Display_Switch = !Display_Switch;
  51   2              } 
  52   1              
  53   1      }
  54          

C51 COMPILER V9.00   TIMER                                                                 05/02/2016 14:37:39 PAGE 2   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    106    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      3       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
