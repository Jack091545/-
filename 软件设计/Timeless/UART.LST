C51 COMPILER V9.01   UART                                                                  04/21/2016 23:01:39 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN UART.OBJ
COMPILER INVOKED BY: C:\D\Software\KeilC51\C51\BIN\C51.EXE UART.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "stc12c5a60s2.h"
   2          #include "UART.h"
   3          
   4          
   5          /*------------------------------------------------
   6                        串口通讯初始化
   7          ------------------------------------------------*/
   8          void UART_Init(void)
   9          {
  10   1          SCON  = 0x50;                       // SCON: 模式 1, 8-bit UART, 使能接收  
  11   1          TMOD |= 0x20;               // TMOD: timer 1, mode 2, 8-bit 重装
  12   1          TH1   = 0xFD;               // TH1:  重装值 9600 波特率 晶振 11.0592MHz  
  13   1          TR1   = 1;                  // TR1:  timer 1 打开 
  14   1      //      EA    = 1;                  //打开总中断
  15   1          ES    = 1;                  //打开串口中断  
  16   1              TI=1;                     
  17   1      }
  18          
  19          
  20          
  21          /*------------------------------------------------
  22                              发送一个字节
  23          ------------------------------------------------*/
  24          void SendByte_UART(unsigned char dat)
  25          {
  26   1       SBUF = dat;
  27   1       while(!TI);
  28   1            TI = 0;
  29   1      }
  30          /*------------------------------------------------
  31                              发送一个字符串
  32          ------------------------------------------------*/
  33          void SendStr(unsigned char *s)
  34          {
  35   1       while(*s!='\0')// \0 表示字符串结束标志，
  36   1                      //通过检测是否字符串末尾
  37   1        {
  38   2        SendByte_UART(*s);
  39   2        s++;
  40   2        }
  41   1      }
  42          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     43    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
